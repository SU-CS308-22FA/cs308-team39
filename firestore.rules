rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /shirts/{document=**} {
    	allow read: if true;
      allow write: if request.auth.uid != null;
    }
    match /jackets/{document=**} {
    	allow read: if true;
      allow write: if request.auth.uid != null;
    }
    match /merchandises/{document=**} {
      allow read: if true;
      allow write: if request.auth.uid != null;
    }
    match /users/{uid}{
    
    		allow read: if (request.auth.uid == uid) || (!request.resource
        	.data.hasAny(['uid','password','email',]));
        allow create: if (request.auth.uid == uid);
        
        	allow update: if (request.auth.uid == uid) &&
        	(!request.resource.data.diff(resource.data).affectedKeys()
        	.hasAny(['type']) || (resource.data.
          key == "" && request.
          resource.data.type == "customer")||(resource.data.
          key == "galatasaraysecretkey" && request.
          resource.data.type == "Galatasaray")|| (resource.data.
          key == "besiktassecretkey" && request.
          resource.data.type == "Besiktas")|| (resource.data.
          key == "fenerbahcesecretkey" && request.
          resource.data.type == "Fenerbahce"));
          
        
  	}   
	}
}